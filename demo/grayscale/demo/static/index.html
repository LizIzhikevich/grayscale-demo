<!-- howdy/templates/index.html -->
<!DOCTYPE html>
<html>
    <head>
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
        <title>Excamera Grayscale demo!</title>
    </head>

    {% load static %}
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.1.js"></script>
    <script type="text/javascript" src="http://cdn.dashjs.org/latest/dash.all.min.js"></script>
    <script type="text/javascript" src="{% static "videojs-dash.js" %}"></script>
    <script type="text/javascript" src="{% static "videojs-dash.min.js" %}"></script>
    <script type="text/javascript">
    $( document ).ready(function() {
	$("#execute").on('click', function(e) {
		console.log("inside");
		var url = document.getElementById("url").value
		var bucket = document.getElementById("bucket").value

		e.preventDefault();
        	jQuery.ajax({
			type: "POST",
			async: true,
			contentType: "application/json; charset=utf-8",
			url: "call_mu", 
			data: JSON.stringify({
				"url": url, 
				"bucket": bucket
			}),
			complete: function(data){
				console.log(data.responseJSON.mpd);
				var player = videojs('vid');
				player.ready(function() {
					player.src({
					    src: data.responseJSON.mpd,
					    type: 'application/dash+xml'
					});
					console.log(player);
					player.play();
				});
        		}});
		e.preventDefault();
	});
    });
    </script>

    <style>
      video {
	margin-left: auto;
        margin-right:auto;
        width: 640px;
        height: 360px;
      }
      input[type=text] {
        padding: 0;
	width: 640px;
        height: 30px;
        position: relative;
        left: 0;
        outline: none;
        border: 1px solid #cdcdcd;
        border-color: rgba(0,0,0,.15);
        background-color: white;
        font-size: 16px;
	margin-bottom: 20px;
	margin-top: 20px;
	margin-left: auto;
	margin-right:auto;
      }
     .advancedSearchTextbox {
        width: 526px;
        margin-right: -4px;
     }
     label {
	cursor: default;
     }
    </style>

    <body>

    <form class="container">
	<h2 class="w3-text-blue">Excamera Grayscale Demo</h2>
        <p>
		Enter URL of the video stored in AWS S3. Wait till the grayscaling is complete
	</p>
	<p>

	<label class="w3-text-blue">
		<b>Video URL</b>
	</label>

	<input class="w3-input w3-border " id="url" type="text" name="field1" placeholder="S3 Url *">
	<p>

	<label class="w3-text-blue">
                <b>S3 Bucket</b>
        </label>
	<input id="bucket" type="text" name="field3" placeholder="S3 Bucket *">
	<p>

	<input name="execute" id="execute" type="submit" value="Execute" />
	<p>

    	<div id="dash_video">
        	<video id="vid" data-dashjs-player controls autoplay class="video-js vjs-default-skin">
		</video>
                <p><p>
    	</div>
    </form>

    </body>

</html>
